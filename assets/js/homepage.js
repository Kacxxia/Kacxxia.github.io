!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.AutoBtnColor=i():t.AutoBtnColor=i()}(window,function(){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(i){return t[i]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=5)}([function(t,i){t.exports=function(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}},function(t){t.exports={"CenturyAlchemist-Pixiv-Novelance":{name:"CenturyAlchemist",from:"Pixiv",artist:"Novelance",ext:".JPG"},"祭-Pixiv-藤原":{name:"祭",from:"Pixiv",artist:"藤原",ext:".jpg"},"黒髪赤眼-Pixiv-NARU":{name:"黒髪赤眼",from:"Pixiv",artist:"NARU",ext:".png"}}},function(t,i,e){var n=e(8),r="object"==typeof self&&self&&self.Object===Object&&self,a=n||r||Function("return this")();t.exports=a},function(t,i,e){var n=e(2).Symbol;t.exports=n},function(t,i,e){var n=e(6),r=e(0),a="Expected a function";t.exports=function(t,i,e){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return r(e)&&(o="leading"in e?!!e.leading:o,s="trailing"in e?!!e.trailing:s),n(t,i,{leading:o,maxWait:i,trailing:s})}},function(t,i,e){t.exports=e(16)},function(t,i,e){var n=e(0),r=e(7),a=e(10),o="Expected a function",s=Math.max,h=Math.min;t.exports=function(t,i,e){var u,c,f,l,v,d,m=0,p=!1,g=!1,w=!0;if("function"!=typeof t)throw new TypeError(o);function b(i){var e=u,n=c;return u=c=void 0,m=i,l=t.apply(n,e)}function y(t){var e=t-d;return void 0===d||e>=i||e<0||g&&t-m>=f}function x(){var t=r();if(y(t))return j(t);v=setTimeout(x,function(t){var e=i-(t-d);return g?h(e,f-(t-m)):e}(t))}function j(t){return v=void 0,w&&u?b(t):(u=c=void 0,l)}function M(){var t=r(),e=y(t);if(u=arguments,c=this,d=t,e){if(void 0===v)return function(t){return m=t,v=setTimeout(x,i),p?b(t):l}(d);if(g)return v=setTimeout(x,i),b(d)}return void 0===v&&(v=setTimeout(x,i)),l}return i=a(i)||0,n(e)&&(p=!!e.leading,f=(g="maxWait"in e)?s(a(e.maxWait)||0,i):f,w="trailing"in e?!!e.trailing:w),M.cancel=function(){void 0!==v&&clearTimeout(v),m=0,u=d=c=v=void 0},M.flush=function(){return void 0===v?l:j(r())},M}},function(t,i,e){var n=e(2);t.exports=function(){return n.Date.now()}},function(t,i,e){(function(i){var e="object"==typeof i&&i&&i.Object===Object&&i;t.exports=e}).call(this,e(9))},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){var n=e(0),r=e(11),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(n(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=n(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var e=h.test(t);return e||u.test(t)?c(t.slice(2),e?2:8):s.test(t)?a:+t}},function(t,i,e){var n=e(12),r=e(15),a="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&n(t)==a}},function(t,i,e){var n=e(3),r=e(13),a=e(14),o="[object Null]",s="[object Undefined]",h=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:o:h&&h in Object(t)?r(t):a(t)}},function(t,i,e){var n=e(3),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var i=a.call(t,s),e=t[s];try{t[s]=void 0;var n=!0}catch(t){}var r=o.call(t);return n&&(i?t[s]=e:delete t[s]),r}},function(t,i){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},function(t,i){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,i,e){"use strict";e.r(i);var n=e(1),r=e(4),a=e.n(r);function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}var u=function(){function t(i,e,n){o(this,t);var r=document.createElement("canvas");i.appendChild(r),this.img=e,this.imgLoader=n,this.canvas=r,this.ctx=r.getContext("2d"),this.container=i}return h(t,[{key:"setCamera",value:function(){this.camera=new m(this),window.addEventListener("deviceorientation",y)}},{key:"reset",value:function(){this.canvas.width=this.width=this.container.offsetWidth,this.canvas.height=this.height=this.container.offsetHeight,this.ctx.clearRect(0,0,this.width,this.height)}},{key:"build",value:function(){var t=this;this.reset(),this.imgLoader.subscribe(function(){t.setViewport(),t.ctx.drawImage(t.img,t.startX,t.startY,t.vw,t.vh,0,0,t.width,t.height),t.setCamera()})}},{key:"setViewport",value:function(){for(this.vw=this.width,this.vh=this.height;this.vw>this.img.width||this.vh>this.img.height;)this.vw=this.vw/1.001,this.vh=this.vh/1.001;this.img.width<this.img.height?(this.vw-=200,this.vh=this.vw*this.height/this.width):(this.vh-=200,this.vw=this.vh*this.width/this.height),this.startX=(this.img.width-this.vw)/2,this.startY=(this.img.height-this.vh)/2,this.img.height>=this.img.width&&(this.startY-=Math.min(this.startY,.118*this.img.height)),this.img.height<this.img.width&&(this.startY+=Math.min(this.img.height-this.startY-this.vh,.118*this.img.height),this.startX+=Math.min(this.img.width-this.startX-this.vw,.118*this.img.width))}},{key:"paint",value:function(t,i){this.ctx.drawImage(this.img,t,i,this.vw,this.vh,0,0,this.width,this.height)}}]),t}(),c=function(){function t(i){var e=this;o(this,t),this.element=i,this.callback=function(){},this.event=null,this.loaded=!1,this.element.addEventListener("load",function(t){e.loaded=!0,e.event=t,e.callback()})}return h(t,[{key:"subscribe",value:function(t){this.callback=t,this.loaded&&t(this.event)}}]),t}();function f(t){return Math.tan(t/180*Math.PI)}var l,v,d,m=function(){function t(i){o(this,t),this.painter=i,this.sightDistance=1/96*2.54*20,this.lastBeta=void 0,this.lastGamma=void 0,this.anchorBeta=void 0,this.anchorGamma=void 0,this.restoreTime=null,this.betaCounter=0,this.gammaCounter=0,this.ticking=!1}return h(t,[{key:"rotate",value:function(t,i){var e=this;try{if(this.lastBeta=t,this.lastGamma=i,this.ticking)return;if(void 0===this.anchorBeta){var n=Math.sqrt(Math.max(Math.pow(b.startX,2)+Math.pow(b.startY,2),Math.pow(b.startX,2)+Math.pow(b.img.height-b.startY,2),Math.pow(b.img.width-b.startX,2)+Math.pow(b.startY,2),Math.pow(b.img.width-b.startX,2)+Math.pow(b.img.height-b.startY,2)));return this.lastX=this.painter.startX,this.lastY=this.painter.startY,this.anchorBeta=t,this.anchorGamma=i,this.step=Math.abs(n/f(30-t)),void(this.duration=.4)}var r=this.painter.startX-f(i-this.anchorGamma)*this.step,a=this.painter.startY-f(t-this.anchorBeta)*this.step;if(Math.abs(r-this.lastX)<3&&Math.abs(a-this.lastY)<3)return;r<0&&(r=0),r+this.painter.vw>this.painter.img.width&&(r=this.painter.img.width-this.painter.vw),a<0&&(a=0),a+this.painter.vh>this.painter.img.height&&(a=this.painter.img.height-this.painter.vh),this.lastX=r,this.lastY=a,this.painter.paint(r,a),0===r||r===this.painter.img.width-this.painter.vw?this.gammaCount++:this.gammaCount=0,0===a||a===this.painter.img.height-this.painter.vh?this.betaCount++:this.betaCount=0,(this.gammaCount>=48||this.betaCount>=48)&&(this.ticking=!0,this.gammaCount=0,this.betaCount=0,this.cubicBezier=function(t,i,e,n){var r=1-3*e+3*t-0,a=3*e-6*t+0,o=3*t-0,s=1-3*n+3*i-0,h=3*n-6*i+0,u=3*i-0;function c(t,i,e,n){return 1/(3*i*t*t+2*e*t+n)}function f(t,i,e,n,r){return i*(t*t*t)+e*(t*t)+n*t+r}return function(t){for(var i=t,e=0;e<5;e++)(i-=(f(i,r,a,o,0)-t)*c(i,r,a,o))<0&&(i=0),i>1&&(i=1);return function(t,i,e,n,r){return i*(t*t*t)+e*(t*t)+n*t+r}(i,s,h,u,0)}}(0,0,.58,1),window.requestAnimationFrame(function(t){return e.restore(t)}))}catch(t){alert(t)}}},{key:"restore",value:function(t){var i=this;try{if(null===this.restoreTime)return this.restoreTime=t,void window.requestAnimationFrame(function(t){return i.restore(t)});var e=this.lastX+(this.painter.startX-this.lastX)*this.cubicBezier((t-this.restoreTime)/1e3/this.duration),n=this.lastY+(this.painter.startY-this.lastY)*this.cubicBezier((t-this.restoreTime)/1e3/this.duration);if(this.painter.paint(e,n),(this.lastX-e)*(e-this.painter.startX)<=0&&(this.lastY-n)*(n-this.painter.startY)<=0)return this.restoreTime=null,this.anchorBeta=this.lastBeta,this.anchorGamma=this.lastGamma,void(this.ticking=!1);window.requestAnimationFrame(function(t){return i.restore(t)})}catch(t){alert(t)}}}]),t}(),p=document.getElementById("home-root"),g=(l=Object.keys(n),v=l[Math.floor(Math.random()*l.length)],d=n[v],{url:"assets/img/Paintings/".concat(v).concat(d.ext)}),w=new Image;w.src=g.url;var b=new u(p,w,new c(w)),y=a()(function(t){this.camera.rotate(t.beta,t.gamma)}.bind(b),1e3/60);function x(t){"keydown"===t.type&&2===t.key.length&&"F"===t.key[0]||(window.removeEventListener("orientationchange",b.build),window.removeEventListener("deviceorientation",y),window.removeEventListener("click",x),window.removeEventListener("touchstart",x),window.removeEventListener("keydown",x),window.location.pathname="/blog")}b.build(),window.addEventListener("orientationchange",b.build),document.addEventListener("click",x),document.addEventListener("touchstart",x),document.addEventListener("keydown",x)}])});